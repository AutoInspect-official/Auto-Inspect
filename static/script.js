(function(){let slideIndex=0;const slides=document.querySelectorAll(".mySlides");const dots=document.querySelectorAll(".dot");const totalSlides=slides.length;function showSlide(index){slides.forEach((slide,i)=>{slide.style.display=(i===index)?"block":"none";dots[i].classList.toggle("active",i===index)})}function nextSlide(){slideIndex=(slideIndex+1)%totalSlides;showSlide(slideIndex)}showSlide(slideIndex);setInterval(nextSlide,3000);document.querySelectorAll(".prev, .next").forEach(control=>{control.addEventListener("click",()=>{slideIndex=(control.classList.contains("prev"))?(slideIndex-1+totalSlides)%totalSlides:(slideIndex+1)%totalSlides;showSlide(slideIndex)})});dots.forEach((dot,i)=>{dot.addEventListener("click",()=>{slideIndex=i;showSlide(slideIndex)})})})();document.addEventListener("DOMContentLoaded",()=>{const form=document.getElementById("vinForm");const vinInput=document.getElementById("vin");const captchaQuestion=document.getElementById("captchaQuestion");const captchaAnswer=document.getElementById("captchaAnswer");function generateCaptcha(){const num1=Math.floor(Math.random()*10);const num2=Math.floor(Math.random()*10);captchaQuestion.textContent=`What is ${num1}+${num2}?`;captchaQuestion.dataset.answer=num1+num2}function validateForm(){const vin=vinInput.value.trim();const answer=parseInt(captchaAnswer.value,10);const correctAnswer=parseInt(captchaQuestion.dataset.answer,10);const vinPattern=/^[A-HJ-NPR-Z0-9]{17}$/;if(!vinPattern.test(vin)){alert("Please enter a valid 17-character VIN.");return false}if(answer!==correctAnswer){alert("Incorrect CAPTCHA. Please try again.");generateCaptcha();return false}return true}form.addEventListener("submit",(event)=>{event.preventDefault();if(validateForm()){const vin=vinInput.value.trim();localStorage.setItem('VIN',vin);window.location.href=`car_info.html?vin=${encodeURIComponent(vin)}`}});generateCaptcha()});document.addEventListener("DOMContentLoaded",()=>{const firstPage=sessionStorage.getItem('firstPage')||window.location.href;sessionStorage.setItem('firstPage',firstPage);window.addEventListener('beforeunload',(event)=>{if(window.location.href===firstPage&&document.referrer&&!document.referrer.includes(window.location.hostname)){event.preventDefault();event.returnValue='Are you sure you want to leave? You might miss important insights!'}})});